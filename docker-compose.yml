version: '3.8'

services:
  wa-gateway:
    build: .
    container_name: wa-gateway
    ports:
      - "5001:5001"
      - "5000:5000"
    environment:
      - DATABASE_URL=postgres://postgres:a0bd3b3c1d54b7833014@postgres_scrapdatan8n:5432/wa_gateaway?sslmode=disable
      - JWT_SECRET=wa-gateway-super-secret-key-2025
      - JWT_EXPIRES_IN=7d
      - NODE_ENV=PRODUCTION
      - PORT=5001
      - DB_USER=postgres
      - DB_PASSWORD=a0bd3b3c1d54b7833014
      - DB_HOST=postgres_scrapdatan8n
      - DB_PORT=5432
      - DB_NAME=wa_gateaway
      - WA_GATEWAY_URL=http://localhost:5001
    volumes:
      - ./media:/app/media
      - ./wa_sessions:/app/wa_sessions
      - ./frontend:/app/frontend
    restart: unless-stopped
    networks:
      - wa-network

networks:
  wa-network:
    external: true
    name: postgres_scrapdatan8n_network